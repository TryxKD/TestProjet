<%- include(`../javascript/TachesVariables.ejs`) %>
<!-- <script src="javascript/TachesVariables.ejs"></script> -->

<script src="javascript/TachesPush.js"></script>
<script src="javascript/TachesSplice.js"></script>

<script>
  // function PDF() {
    // Ouverture du menu d'exporation des Taches
    $(document).ready(function(){
      $(".btnExporter").click(function(){
        $("#Exportat").show("fast")
      });
    });
    // ----------------------------------------------------------------------

    // Fermeture du menu d'exporation
    $(document).ready(function(){
      $(".closeExportat").click(function(){
        $("#Exportat").hide("fast")
      })
    })
    // ----------------------------------------------------------------------

    // Traitement de l'exporation
    $(document).ready(function() {
      // Verification des checkbox
      if($('.check').change(function() {
        if($(this).prop('checked')) {
          
          // // Prend l'id de l'element cocher
          let id = $(this).val()
          // ----------------------------------------------------------------------
          
          TachesPush(id)
          
        } 
        else {
          
          // // Prend l'id de l'element a supprimer
          let id = $(this).val()
          // ----------------------------------------------------------------------
          
          TachesSplice(id)
        }
      }))
      // ----------------------------------------------------------------------

      // Verification des formats
      $('.viewCopy').click(function() {
        // Fait la fonction TachesLien()
        $.getScript(`javascript/TachesLien.js`, function() {
          TachesLien()
        })
        // ----------------------------------------------------------------------
      })  
      // ----------------------------------------------------------------------

      // Lorsque l'utilisateur clique sur le bouton "closeExportat"
      $('.closeExportat').click(function() {
          location.reload(); // Recharger la page
      });
      // ----------------------------------------------------------------------

      // Lorsque la page est actualisée
      $(window).on('beforeunload', function() {
          localStorage.clear(); // Réinitialiser le localStorage
          $('.check:checked').prop('checked', false); // Décocher toutes les cases à cocher
      });
      // ----------------------------------------------------------------------

    })
    // ----------------------------------------------------------------------
  // }
</script>